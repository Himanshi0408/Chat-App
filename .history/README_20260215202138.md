#  Real-Time Chat Application

A modern, full-stack chat application with **instant messaging**, **real-time notifications**, and **online status tracking** â€” built with React, Node.js, Express, MongoDB, and Socket.io.

##  What It Does

- **Sign up & Login** â†’ Secure auth with JWT + password hashing
- **User List** â†’ See all available users (except yourself)
- **Real-Time Chat** â†’ Send/receive messages instantly without page refresh
- **Online Status** â†’ Know who's online, who's offline
- **Message History** â†’ Previous conversations persist in database
- **Optimistic Updates** â†’ Messages appear instantly like WhatsApp

##  Tech Stack

| Layer | Tech |
|-------|------|
| **Frontend** | React 19 + Vite + Socket.io-client + Axios |
| **Backend** | Node.js + Express + Socket.io |
| **Database** | MongoDB |
| **Auth** | JWT + bcryptjs |
| **Real-Time** | Socket.io (bidirectional communication) |

##  Project Structure

```
Chat-App/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/db.js                 # MongoDB connection
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js        # Register & Login
â”‚   â”‚   â”‚   â”œâ”€â”€ messageController.js     # Send & Fetch messages
â”‚   â”‚   â”‚   â””â”€â”€ userController.js        # User profile & list
â”‚   â”‚   â”œâ”€â”€ middleware/authMiddleware.js # JWT verification
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ User.js                  # User schema
â”‚   â”‚   â”‚   â””â”€â”€ Message.js               # Message schema
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ messageRoutes.js
â”‚   â”‚   â”‚   â””â”€â”€ userRoutes.js
â”‚   â”‚   â””â”€â”€ socket/socketHandler.js      # Real-time events
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ frontend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/axios.js                 # API client with JWT
    â”‚   â”œâ”€â”€ context/
    â”‚   â”‚   â”œâ”€â”€ AuthContext.jsx          # Auth state
    â”‚   â”‚   â””â”€â”€ ChatContext.jsx          # Messages & online users
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â””â”€â”€ Chat/
    â”‚   â”‚       â”œâ”€â”€ ChatWindow.jsx       # Main chat UI
    â”‚   â”‚       â”œâ”€â”€ ChatList.jsx         # User list
    â”‚   â”‚       â”œâ”€â”€ MessageInput.jsx     # Message input
    â”‚   â”‚       â””â”€â”€ ...
    â”‚   â”œâ”€â”€ socket/socket.js             # Socket.io client
    â”‚   â”œâ”€â”€ pages/Dashboard.jsx          # Main page
    â”‚   â”œâ”€â”€ App.jsx
    â”‚   â””â”€â”€ main.jsx
    â”œâ”€â”€ index.html
    â””â”€â”€ package.json
```

##  Quick Start

### Prerequisites
- Node.js (v14+)
- MongoDB (local or Atlas URI)

### Backend Setup

```bash
cd backend

# Install dependencies
npm install

# Create .env file
echo "MONGO_URI=mongodb://localhost:27017/chat-app
JWT_SECRET=your_jwt_secret_key_here
PORT=5000" > .env

# Start server
npm start
# âœ“ Runs on http://localhost:5000
```

### Frontend Setup

```bash
cd frontend

# Install dependencies
npm install

# Start dev server
npm run dev
# âœ“ Runs on http://localhost:5173
```

Open **http://localhost:5173** in browser â†’ Ready to chat! 

##  API Endpoints

### Auth
- `POST /api/auth/register` â€” Create account
- `POST /api/auth/login` â€” Login & get JWT token

### Users
- `GET /api/users/me` â€” Your profile
- `GET /api/users/` â€” All users (except you)
- `GET /api/users/online` â€” Online users list
- `PUT /api/users/update` â€” Update profile

### Messages
- `POST /api/chat` â€” Send message
- `GET /api/chat/:userId` â€” Fetch chat history

## ğŸ”Œ Socket Events

### Client â†’ Server
```javascript
socket.emit("join", userId)              // Join user room
socket.emit("sendMessage", messageData)  // Send via socket
```

### Server â†’ Client
```javascript
socket.on("receiveMessage", message)     // New message
socket.on("userOnline", {userId, ...})   // User came online
socket.on("userOffline", {userId, ...})  // User went offline
socket.on("onlineUsersList", userIds)    // Online users list
```

##  How It Works (Message Flow)

```
User A sends "Hello" to User B
              â†“
   1ï¸âƒ£ Message appears INSTANTLY in UI (optimistic update)
              â†“
   2ï¸âƒ£ Backend saves to MongoDB + emits via Socket.io
              â†“
   3ï¸âƒ£ User B gets socket event â†’ message appears in their UI
              â†“
   4ï¸âƒ£ All without page refresh 
```

### Key Features

**1. Optimistic Updates**
- Message shows instantly while API request is in-flight
- Prevents the "message disappears until response" problem

**2. Real-Time Socket Sync**
- Both REST API AND Socket.io work together
- REST API saves to DB, Socket emits for instant delivery

**3. Smart Duplicate Prevention**
- Detects if message already in UI (optimistic)
- Replaces with real data from server
- Prevents showing same message twice

**4. Online Status**
- Server tracks connected users
- Broadcasting status changes to all clients
- UI shows green/red indicator

##  Security

âœ… **JWT Authentication** â€” Every request verified
âœ… **Password Hashing** â€” bcryptjs (12 rounds)
âœ… **Socket Auth** â€” JWT verified on connection
âœ… **CORS Enabled** â€” Frontend-Backend communication safe

##  Frontend State Management

### AuthContext
```javascript
{
  user: { _id, name, email, profilePic },
  isAuthenticated: true,
  token: "jwt_token_here"
}
```

### ChatContext
```javascript
{
  messages: [...],              // Messages for active chat
  activeChat: { user object },  // Current chat partner
  onlineUsers: Set([userIds])   // Online users
}
```

##  UI/UX Details

- **Sending Indicator** â†’  Shows while message is being sent
- **Checkmark** â†’ âœ“ Shows when message is confirmed
- **Loading States** â†’ Chat history loading
- **Error Handling** â†’ Toast notifications for errors
- **Auto-scroll** â†’ Messages scroll to bottom automatically

##  Troubleshooting

**Messages not appearing?**
- Check browser console (F12)
- Verify backend is running on port 5000
- Check MongoDB connection in .env

**Socket not connecting?**
- Ensure CORS is enabled in backend
- Check JWT token in localStorage
- Verify server.js has `app.locals.io = io`

**Login failing?**
- Check MONGO_URI in .env
- Ensure user exists with correct password
- Check JWT_SECRET is set

##  Environment Variables

### Backend (.env)
```
MONGO_URI=mongodb://localhost:27017/chat-app
JWT_SECRET=your_secret_key_min_20_chars
PORT=5000
```

### Frontend (.env optional)
```
VITE_API_URL=http://localhost:5000/api
```

##  Production Deployment

**Backend**: Deploy to Heroku, Railway, or Render
**Frontend**: Deploy to Vercel, Netlify, or GitHub Pages

Update API URL in frontend when deploying.

---

**Made with  for real-time communication**